(function(e){function i(){if(!t){t=!0;document.getElementById("sg-viewport").contentWindow.postMessage("on","http://"+window.location.host);$("#comment-link strong").text("ON")}else{t=!1;document.getElementById("sg-viewport").contentWindow.postMessage("off","http://"+window.location.host);$("#comment-link strong").text("OFF");o(999)}}function s(){$('<div id="comment-container"></div>').html('<a href="#" id="close-comments">Close</a><h2 id="comment-title">Annotation Title</h2><div id="comment-text">Here is some comment text</div>').appendTo("body").css("bottom",-$(this).outerHeight());n<r?$("#comment-container").hide():$("#comment-container").show();$("body").delegate("#close-comments","click",function(e){var t=$("#comment-container").outerHeight();o(t);return!1})}function o(e){$("#comment-container").show();if(n>r)$("#comment-container").css("bottom",-e);else{var t=$("#comment-container").offset().top;$("html,body").animate({scrollTop:t},500)}}function u(e,t,n){var r=$("#comment-container"),i=$("#comment-title"),s=$("#comment-text");i.text(t);s.html(n);o(0)}function a(e){if(e.origin!=="http://"+window.location.host)return;u(e.data.el,e.data.title,e.data.comment)}var t=!1,n=document.documentElement.clientWidth,r=650;window.addEventListener("message",a,!1)})(this);